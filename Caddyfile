#this is basic caddy file format


# Redirect www to non-www and enforce HTTPS
www.fruhling-bakery.com {
    redir https://fruhling-bakery.com{uri} permanent
}

# Main site configuration
fruhling-bakery.com {
    try_files {path} /index.html
    encode gzip                   # Enable gzip compression for faster loading
    reverse_proxy web:3000      # Path to your static site files
    log {
        output file /var/log/caddy/mydomain_access.log {
            roll_size 10mb
            roll_keep 10
            roll_keep_for 720h
        }
    }

    # Handle errors
    handle_errors {
        rewrite * /error.html
        file_server
    }

    # Optional: security headers
    header {
        Strict-Transport-Security "max-age=31536000;"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        Referrer-Policy "no-referrer"
    }
}

